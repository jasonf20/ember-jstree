<!DOCTYPE html>
<html>
<head>
  <title>Test Page for ember-jstree</title>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jstree/3.0.0/themes/default/style.min.css" />
  
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jstree/3.0.0/jstree.min.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.5.0/ember.js"></script>
  <script type="text/javascript" src="../build/ember-jstree.js"></script>
  <script type="text/javascript">
    App = Ember.Application.createWithMixins(EmberJsTree);
    
    App.ApplicationController = Em.Controller.extend({
      items: Em.A(),
      selected: Em.A(),
      init: function() {
        var items = Em.A([
            Node.create({title: 'root1'}),
            Node.create({title: 'root2'})
        ]);

        this.set('items', items);
      },
      actions: {
        overwriteItems: function() {
          var items = Em.A([
              Node.create({title: 'root1'}),
              Node.create({title: 'root2', children: Em.A([Node.create({title: 'child 1'}), Node.create({title: 'child 2'})])}),
              Node.create({title: 'root3'})
          ]);

          this.set('items', items);
        },
        clearItems: function() {
          this.get('items').clear();
        },
        addItem: function() {
          this.get('items').pushObject(Node.create({title: 'freshly baked', selected: true, disabled: true}));
        },
        renameItem: function() {
          this.get('items').objectAt(0).set('title', 'changed');
        },
        toggleDisabled: function() {
          var val = this.get('items').objectAt(1).get('disabled');
          this.get('items').objectAt(1).set('disabled', !val);
        },
        addChild: function() {
          this.get('items').objectAt(0).get('children').pushObject(Node.create({title: 'Meow, a kid!'}));
        }
      }
    });
    
  </script>
</head>
<body>
  <script type="text/x-handlebars">
    {{js-tree roots=items selected=selected}}
    <button {{action 'overwriteItems'}}>Overwrite stuff</button>
    <button {{action 'clearItems'}}>Clear stuff</button>
    <button {{action 'addItem'}}>Add item</button>
    <button {{action 'renameItem'}}>Rename item</button>
    <button {{action 'addChild'}}>Add child</button>
    <button {{action 'toggleDisabled'}}>Toggle disabled</button>

    <br />
    Selected: 
    {{#each selected}}
    {{title}}
    {{/each}}
  </script>
  
</body>
</html>